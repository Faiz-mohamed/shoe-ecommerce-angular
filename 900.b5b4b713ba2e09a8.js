"use strict";(self.webpackChunkshoe=self.webpackChunkshoe||[]).push([[900],{4900:(M,u,i)=>{i.r(u),i.d(u,{CheckoutModule:()=>y});var d=i(177),l=i(7945),e=i(7705),m=i(6042),t=i(9417),h=i(8010);function g(a,F){if(1&a){const n=e.RV6();e.j41(0,"div",29),e.bIt("click",function(){const c=e.eBV(n).$implicit,P=e.XpG();return e.Njj(P.onProductClick(c.product.id))}),e.nrm(1,"img",30),e.j41(2,"div",31)(3,"h4"),e.EFF(4),e.k0s(),e.j41(5,"p"),e.EFF(6),e.k0s(),e.j41(7,"p"),e.EFF(8),e.k0s()()()}if(2&a){const n=F.$implicit;let o;e.R7$(1),e.Y8G("src",n.product.image,e.B4B),e.R7$(3),e.JRh(n.product.name),e.R7$(2),e.SpI("Quantity: ",n.quantity,""),e.R7$(2),e.SpI("Price: $",n.product.price*(null!==(o=n.quantity)&&void 0!==o?o:1),"")}}const s=function(a){return{"invalid-input":a}};let f=(()=>{class a{constructor(){this.cartService=(0,e.WQX)(m.m),this.router=(0,e.WQX)(l.Ix),this.auth=(0,e.WQX)(h.u),this.fullName="",this.submitClicked=!1}ngOnInit(){this.cartService.cart.subscribe(o=>{this.cartProducts=o,this.totalPrice=o.reduce((r,c)=>r+c.product.price*(c.quantity??1),0)}),this.checkoutForm=new t.gE({fullName:new t.MJ(null,t.k0.required),email:new t.MJ(null,[t.k0.required,t.k0.email]),phoneNumber:new t.MJ(null,[t.k0.required,t.k0.pattern("^(?=(?:.*\\d){10,})[0-9 +\\-]+$")]),address:new t.MJ(null,t.k0.required),city:new t.MJ(null),zip:new t.MJ(null,t.k0.required),country:new t.MJ(null,t.k0.required),paymentMethod:new t.MJ(null,t.k0.required)});const n=this.auth.getLoggedInUser();n&&(this.fullName=n.lastName?n.firstName+" "+n.lastName:n.firstName,this.checkoutForm.patchValue({fullName:this.fullName,email:n.email,phoneNumber:n.phoneNumber}))}onProductClick(n){this.router.navigate(["shop/product-detail",n])}onSubmit(){this.checkoutForm.valid&&(this.submitClicked=!0,console.log("Order Data:",this.checkoutForm.value))}hasError(n,o){const r=this.checkoutForm.get(n);return r&&r.touched&&r.hasError(o)}canExit(){if(!this.checkoutForm.dirty)return!0;const n=["address","city","zip","country","paymentMethod"];let o=!1;for(const r of n){const c=this.checkoutForm.get(r);if(c&&null!==c.value&&""!==c.value){o=!0;break}}return!(!o||!this.submitClicked)||!o}static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["checkout-page"]],decls:58,vars:28,consts:[[1,"checkout-page"],[1,"checkout-container"],[1,"checkout-form",3,"formGroup","ngSubmit"],[1,"form-group"],["for","fullname"],["type","text","id","fullname","placeholder","Enter your full name","formControlName","fullName",3,"ngClass"],["for","email"],["type","email","id","email","placeholder","Enter your email","formControlName","email",3,"ngClass"],["for","number"],["type","tel","id","number","placeholder","Enter your phone number","formControlName","phoneNumber",3,"ngClass"],["for","address"],["type","text","id","address","placeholder","Street address","formControlName","address",3,"ngClass"],["for","city"],["type","text","id","city","placeholder","City","formControlName","city",3,"ngClass"],["for","zip"],["type","text","id","zip","placeholder","ZIP code","formControlName","zip",3,"ngClass"],["for","country"],["type","text","id","country","placeholder","Country","formControlName","country",3,"ngClass"],["for","payment-method"],["id","payment-method","formControlName","paymentMethod",1,"payment-method",3,"ngClass"],["value","","disabled","","selected",""],["value","cod"],["value","upi"],["value","netbanking"],["value","card"],[1,"order-summary"],["class","cart-item",3,"click",4,"ngFor","ngForOf"],[1,"order-total"],["routerLink","/checkout/orderplaced",1,"place-order-btn",3,"disabled","click"],[1,"cart-item",3,"click"],["alt","p.product.name","onerror","this.onerror=null; this.src='assets/unavailable1.png';",3,"src"],[1,"cart-info"]],template:function(o,r){1&o&&(e.j41(0,"section",0)(1,"h2"),e.EFF(2,"Checkout"),e.k0s(),e.j41(3,"div",1)(4,"form",2),e.bIt("ngSubmit",function(){return r.onSubmit()}),e.j41(5,"h3"),e.EFF(6,"Billing & Shipping Details"),e.k0s(),e.j41(7,"div",3)(8,"label",4),e.EFF(9,"Full Name"),e.k0s(),e.nrm(10,"input",5),e.k0s(),e.j41(11,"div",3)(12,"label",6),e.EFF(13,"Email"),e.k0s(),e.nrm(14,"input",7),e.k0s(),e.j41(15,"div",3)(16,"label",8),e.EFF(17,"Phone Number"),e.k0s(),e.nrm(18,"input",9),e.k0s(),e.j41(19,"div",3)(20,"label",10),e.EFF(21,"Address"),e.k0s(),e.nrm(22,"input",11),e.k0s(),e.j41(23,"div",3)(24,"label",12),e.EFF(25,"City"),e.k0s(),e.nrm(26,"input",13),e.k0s(),e.j41(27,"div",3)(28,"label",14),e.EFF(29,"ZIP Code"),e.k0s(),e.nrm(30,"input",15),e.k0s(),e.j41(31,"div",3)(32,"label",16),e.EFF(33,"Country"),e.k0s(),e.nrm(34,"input",17),e.k0s(),e.j41(35,"div",3)(36,"label",18),e.EFF(37,"Payment Method"),e.k0s(),e.j41(38,"select",19)(39,"option",20),e.EFF(40,"Select a payment method"),e.k0s(),e.j41(41,"option",21),e.EFF(42,"Cash on Delivery"),e.k0s(),e.j41(43,"option",22),e.EFF(44,"UPI"),e.k0s(),e.j41(45,"option",23),e.EFF(46,"Net Banking"),e.k0s(),e.j41(47,"option",24),e.EFF(48,"Credit / Debit Card"),e.k0s()()()(),e.j41(49,"div",25)(50,"h3"),e.EFF(51,"Order Summary"),e.k0s(),e.DNE(52,g,9,4,"div",26),e.j41(53,"div",27)(54,"p"),e.EFF(55),e.k0s(),e.j41(56,"button",28),e.bIt("click",function(){return r.onSubmit()}),e.EFF(57,"Place Order"),e.k0s()()()()()),2&o&&(e.R7$(4),e.Y8G("formGroup",r.checkoutForm),e.R7$(6),e.Y8G("ngClass",e.eq3(12,s,r.hasError("fullName","required"))),e.R7$(4),e.Y8G("ngClass",e.eq3(14,s,r.hasError("email","required")||r.hasError("email","email"))),e.R7$(4),e.Y8G("ngClass",e.eq3(16,s,r.hasError("phoneNumber","required")||r.hasError("phoneNumber","pattern"))),e.R7$(4),e.Y8G("ngClass",e.eq3(18,s,r.hasError("address","required"))),e.R7$(4),e.Y8G("ngClass",e.eq3(20,s,r.hasError("city","required"))),e.R7$(4),e.Y8G("ngClass",e.eq3(22,s,r.hasError("zip","required"))),e.R7$(4),e.Y8G("ngClass",e.eq3(24,s,r.hasError("country","required"))),e.R7$(4),e.Y8G("ngClass",e.eq3(26,s,r.hasError("paymentMethod","required"))),e.R7$(14),e.Y8G("ngForOf",r.cartProducts),e.R7$(3),e.SpI("Total: $",r.totalPrice,""),e.R7$(1),e.Y8G("disabled",r.checkoutForm.invalid))},dependencies:[d.YU,d.Sq,l.Wk,t.qT,t.xH,t.y7,t.me,t.wz,t.BC,t.cb,t.j4,t.JD],styles:[".checkout-page[_ngcontent-%COMP%]{max-width:1000px;margin:40px auto;padding:20px;font-family:Arial,sans-serif}.checkout-page[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.checkout-container[_ngcontent-%COMP%]{display:flex;gap:40px;flex-wrap:wrap}.checkout-form[_ngcontent-%COMP%]{flex:1;min-width:300px;background:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 12px #0000001a}.checkout-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:5px;font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ccc;border-radius:6px;outline:none;transition:border .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#f39c12}.payment-method[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ccc;border-radius:6px;outline:none;transition:border .3s ease}.form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#f39c12}.order-summary[_ngcontent-%COMP%]{flex:1;min-width:300px;background:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 12px #0000001a}.order-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:15px}.cart-item[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center;margin-bottom:15px;cursor:pointer}.cart-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:auto;border-radius:5px}.cart-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:16px}.cart-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:2px 0;font-size:14px;color:#555}.order-total[_ngcontent-%COMP%]{border-top:1px solid #ddd;padding-top:15px;text-align:center}.place-order-btn[_ngcontent-%COMP%]{padding:10px 20px;background:#f39c12;color:#111;border:none;border-radius:6px;cursor:pointer;margin-top:10px;transition:background .3s ease}.place-order-btn[_ngcontent-%COMP%]:hover{background:#e67e22}@media (max-width: 800px){.checkout-container[_ngcontent-%COMP%]{flex-direction:column;gap:20px}}.invalid-input[_ngcontent-%COMP%]{border:1px solid red;background-color:#ffb3b3}.checkout-btn[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}.place-order-btn[_ngcontent-%COMP%]:disabled{background-color:#ccc;color:#666;cursor:not-allowed;border:none}"]})}}return a})(),C=(()=>{class a{static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["order-placed"]],decls:8,vars:0,consts:[[1,"order-placed-page"],[1,"order-placed-container"],["routerLink","",1,"home-btn"]],template:function(o,r){1&o&&(e.j41(0,"section",0)(1,"div",1)(2,"h2"),e.EFF(3,"Thank You!"),e.k0s(),e.j41(4,"p"),e.EFF(5,"Your order has been successfully placed."),e.k0s(),e.j41(6,"a",2),e.EFF(7,"Go Back to Home"),e.k0s()()())},dependencies:[l.Wk],styles:[".order-placed-page[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:90vh;background:#f8f8f8;font-family:Arial,sans-serif}.order-placed-container[_ngcontent-%COMP%]{background:#fff;padding:30px 40px;border-radius:10px;box-shadow:0 4px 20px #0000001a;text-align:center;max-width:500px;width:100%}.order-placed-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#27ae60;margin-bottom:10px}.order-placed-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;margin-bottom:20px;color:#333}.home-btn[_ngcontent-%COMP%]{display:inline-block;padding:12px 25px;background:#f39c12;color:#111;text-decoration:none;border-radius:6px;font-weight:700;transition:background .3s ease}.home-btn[_ngcontent-%COMP%]:hover{background:#e67e22}"]})}}return a})();var p=i(4978),k=i(3149);const b=[{path:"",component:f,canActivate:[p.W],canDeactivate:[k.h]},{path:"orderplaced",component:C,canActivate:[p.W]}];let x=(()=>{class a{static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[l.iI.forChild(b),l.iI]})}}return a})(),y=(()=>{class a{static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[d.MD,x,t.X1]})}}return a})()}}]);